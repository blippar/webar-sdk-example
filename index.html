<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Blippar WebAR">
    <meta name="apple-mobile-web-app-title" content="Blippar WebAR">
    <meta name="msapplication-TileColor" content="#DA532C">
    <meta name="msapplication-config" content="icons/browserconfig.xml">
    <meta name="description" content="Blippar WebAR">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta id="theme-color" name="theme-color" content="#FFFFFF">

    <link rel="manifest" href="webar-sdk/icons/site.webmanifest">
    <link rel="apple-touch-icon" sizes="180x180" href="webar-sdk/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="webar-sdk/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="webar-sdk/icons/favicon-16x16.png">
    <link rel="mask-icon" href="webar-sdk/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="webar-sdk/icons/favicon.ico">

    <base target="_blank">

    <title>Blippar WebAR Demo</title>
  </head>

  <!-- Step 1: Include WebAR-sdk script -->

  <script src="webar-sdk/blippar-webar.0381d720.js"></script>


  <script>
    // Give a callback when the WebAR Stage <a-entity webar-stage> is ready  to display the 3d object
    WebARsdk.SetStageReadyCallback(() => {
      console.info('Stage is ready now!!!');
    });

    // Give a callback when the device is close to the object

    // closenessRatio is how close to the object, the callback has to be made
    // 0.25 to 0.4 works better depending on the need
    // 0.25 is more closer than 0.4
    let closenessRatio = 0.30;
    WebARsdk.SetPortalEntryCallback(() => {
        console.info('Entered the portal');

        let enableGyroCam = true;
        WebARsdk.DisableTracking(enableGyroCam);
        console.info('Enabled gyro cam');
      },
    closenessRatio);
  </script>

    <body>
      <!-- Step 2: Add webar-scene attribute to AFrame's <a-scene> tag -->
        <!-- Provide a valid Blippar license-key value in the key: property  -->
      <a-scene
        webar-scene="key: xxxxxxxx-1111-2222-3333-yyyyyyyyyyyy"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        loading-screen="enabled: false"
        light="defaultLightsEnabled: false"
        renderer="antialias: true; colorManagement: true; sortObjects: false; precision: high; logarithmicDepthBuffer: false; physicallyCorrectLights: false;">

        <!-- Step 3: Add webar-camera attribute to AFrame's <a-entity camera> tag -->
          <!-- Do not change the default values of fov and zoom properties -->
        <a-entity
          webar-camera
          camera="fov: 80; zoom: 1;"
          wasd-controls-enabled="false"
          look-controls="enabled: true; touchEnabled: false;"></a-entity>

        <a-assets timeout="60000">
          <a-asset-item id="shoe" src="webar-sdk/models/MaterialsVariantsShoe.glb"></a-asset-item>
        </a-assets>

        <!-- Step 4: Add webar-stage attribute to an AFrame's parent <a-entity> tag -->
        <a-entity webar-stage>

          <!-- Step 5: Add AR models under the webar-stage node -->
            <!-- Add webar-loadmonitor attribute to the entities to display loading progress screen before starting the surface tracking -->
          <a-entity gltf-model="#shoe" id="shoe_1" rotation="0 0 0" position="0 0 0" scale="5 5 5" webar-loadmonitor="elType: glb"></a-entity>

        </a-entity>

        <a-entity light="type: ambient; color: #EEE; intensity: 0.75"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1.0; castShadow: false;" position="-0.5 1 1"></a-entity>
      </a-scene>
  </body>
</html>
